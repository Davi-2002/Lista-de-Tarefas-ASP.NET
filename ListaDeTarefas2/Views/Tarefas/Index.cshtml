@* <ul>
    @foreach (var tarefa in Model)
    {
        <li></li>
        <li>@tarefa.Id</li>
        <li>@tarefa.DataDeCriacao</li>
        <li>@tarefa.DataLimite</li>
        <li>@tarefa.DataFinalizada</li>
    }
</ul> *@

@model List<ListaDeTarefas2.Models.Tarefa>


<div class="container" style="margin-top:6rem;">
    <h1>@ViewData["Title"]</h1>

    <form method="get" asp-controller="Tarefas" asp-action="Index" class="mb-3">

        <div class="input-group mb-2">
            <input type="text" name="busca" value="@ViewData["Busca"]" class="form-control" placeholder="Buscar por título..." />
            <button type="submit" class="btn btn-outline-primary">Buscar</button>
            @if (!string.IsNullOrEmpty(ViewData["Busca"] as string))
            {
                <a asp-action="Index" class="btn btn-outline-secondary">Limpar</a>
            }
        </div>

        <div class="d-flex align-items-center mb-2">

            <select name="ordenarPor" class="form-select w-auto me-3" onchange="this.form.submit()">
                <option value="DataLimiteAsc" selected="@(ViewData["OrdenarPor"] as string == "DataLimiteAsc")">Mais próximas do prazo</option>
                <option value="DataLimiteDesc" selected="@(ViewData["OrdenarPor"] as string == "DataLimiteDesc")">Mais distantes do prazo</option>
                <option value="DataCriacaoDesc" selected="@(ViewData["OrdenarPor"] as string == "DataCriacaoDesc" || ViewData["OrdenarPor"] == null)">Mais recentes</option>
                <option value="DataCriacaoAsc" selected="@(ViewData["OrdenarPor"] as string == "DataCriacaoAsc")">Mais antigas</option>
            </select>

            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="filtro" id="filtroTodos" value="todos"
                       onchange="this.form.submit()" @(ViewData["Filtro"] as string == "todos" || ViewData["Filtro"] == null ? "checked" : "")>
                <label class="form-check-label" for="filtroTodos">Todas as tarefas</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="filtro" id="filtroPendentes" value="pendentes"
                       onchange="this.form.submit()" @(ViewData["Filtro"] as string == "pendentes" ? "checked" : "")>
                <label class="form-check-label" for="filtroPendentes">Apenas pendentes</label>
            </div>
            <div class="form-check form-check-inline"> 
                <input class="form-check-input" type="radio" name="filtro" id="filtroConcluidas" value="concluidas"
                       onchange="this.form.submit()" @(ViewData["Filtro"] as string == "concluidas" ? "checked" : "")>
                <label class="form-check-label" for="filtroConcluidas">Apenas concluídas</label>
            </div>

        </div>
    </form>
    @if(Model.Count > 0)
    {
        <table class="table">
            <thead>
                <tr>
                    @* <th scope="col">#</th> *@
                    <th class="titulo-col text-start" scope="col">Título</th>
                    <th scope="col">DataDeCriacao</th>
                    <th scope="col">DataLimite</th>
                    <th scope="col">Finalizado</th>
                    <th scope="col">Edições</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var tarefa in Model)
                {
                    <tr>
                        @* <th scope="row">@tarefa.Id</th> *@
                        <td class="titulo-col text-start">@tarefa.Titulo</td>
                        <td>@tarefa.DataDeCriacao</td>
                        <td>@tarefa.DataLimite.ToString("dd/MM/yyyy")</td>
                        <td>
                            @if(tarefa.Finalizado)
                            {
                                <span class="badge bg-success">Concluído</span>
                            }
                            else
                            {
                                <span class="badge bg-danger">Pendente</span>
                            }
                        </td>
                        <td>
                            @if(!tarefa.Finalizado)
                            {
                                <a asp-controller="Tarefas" asp-action="Concluir" asp-route-id="@tarefa.Id" class="btn btn-success">Concluir</a>
                            }
                            <a asp-controller="Tarefas" asp-action="Edit" asp-route-id="@tarefa.Id" class="btn btn-warning">Editar</a>
                            <a asp-controller="Tarefas" asp-action="Delete" asp-route-id="@tarefa.Id" class="btn btn-danger">Apagar</a>
                        </td>
                    </tr>
                }

            </tbody>  
        </table>
    }
    else
    {
        <p>não há registros de tarefas</p>
    }

    <a asp-controller="Tarefas" asp-action="Create" class="btn btn-primary">Nova Tarefa</a>
</div>

